; Modify DOS interupt handler
CODE SEGMENT PARA
	ASSUME CS:CODE, DS:CODE

INT0_HANDLER PROC FAR
	
	PUSH AX
	PUSH DX
	PUSH DS

	STI
	JMP CODE1

STRING DB 'THIS IS INTERUPT',0DH,0AH,'$'

CODE1:
	PUSH CS
	POP DS

	MOV DX, OFFSET STRING	; Print string
	MOV AH,9
	INT 21H

	CLI
	POP DS
	POP DX
	POP AX
	IRET
INT0_HANDLER ENDP

START:

	PUSH CS
	POP DS
	MOV DX,OFFSET INT0_HANDLER	
	MOV AL,1CH
	MOV AH,25H
	INT 21H		; Set DS:DX as INT 1C handler. (clock int)

	MOV AH, 31H
	MOV AL,0
	MOV DX,(START - CODE+15)/16 + 10H
	INT 21H		; Store it into memory

	MOV AX, 4C00H
	INT 21H

CODE ENDS
	END START
	
